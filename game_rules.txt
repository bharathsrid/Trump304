1.0 Introduction
----------------

304 (Pronounced 'three-oh-four') is a card game popular in Sri Lanka.
Trump304 is an electronic version of the same game, playable online
by 2, 3, or 4 players.


2.0 Basic Rules of 304
----------------------

The game supports 2, 3, or 4 players:
- 2 players: Head-to-head, no teams.
- 3 players: Once the trumper is decided, the other two form a team
  against the trumper.
- 4 players: Players seated opposite each other (alternating seats)
  form a team of 2.


2.1 Card Value and Precedence
-----------------------------

304 uses a standard deck excluding jokers and cards 2 through 6 in
all suits. The playing deck consists of 32 cards (7 through Ace in
all four suits). Each card has a point value:

    J  - 30
    9  - 20
    A  - 11
    10 - 10
    K  - 3
    Q  - 2
    8  - 0
    7  - 0

Note: The card hierarchy follows point value, NOT the usual rank
order. For example, J beats 9, which beats A, which beats 10.

During play, a card can only be beaten by a card of the same suit
with higher points — or by a trump card (see Section 2.4).

The total points across all 32 cards is 304, giving the game its name.

The objective is to accumulate enough points (through winning tricks)
to meet or exceed the bid target.


2.2 Dealing
-----------

The game begins with the dealer shuffling and dealing the cards.
Before dealing, the player to the dealer's left may cut the deck.

General rules:
- Cards are always dealt clockwise, starting with the player to the
  dealer's left.
- The dealer role rotates clockwise after each game.
- The dealer is also a player.

Dealing by player count:

  2 players:
  - 10 cards each, dealt in 3 rounds: 4, 4, then 2 cards.
  - The remaining 12 cards are placed face-down in the center as a
    draw pile.

  3 players:
  - 10 cards each, dealt in 3 rounds: 4, 4, then 2 cards.
  - The remaining 2 cards are placed face-down in the center.

  4 players:
  - All 32 cards are dealt — 8 cards per player in 2 rounds of 4.
  - There is no center pile.


2.3 Bidding
-----------

After all cards are dealt, the bidding phase begins. Starting with
the player to the dealer's left and proceeding clockwise, each player
may place a bid.

A bid is the number of points the player believes their team (or
themselves in 2/3-player) can win, assuming they get to choose the
trump suit. The highest bidder becomes the "trumper" and chooses the
trump suit.

Bidding rules:
- Bids must be in multiples of 10.
- Minimum bid is 150 (more than half of 304).
- Each player may bid only once (with exceptions below).
- A player may pass instead of bidding. A pass still counts as that
  player's one bid.
- A player may NOT overbid their own partner, unless an opponent has
  already overbid that partner.
- If no one bids, the dealer is forced to bid the minimum (150).

Special bids (200 and above):
- If no bid of 200+ has been placed yet, a player making a bid of
  200+ is allowed to:
  (a) Overbid their own partner.
  (b) Make a second bid (if they already bid or passed once).
- Even with a 200+ bid, you may NOT overbid yourself unless someone
  else has overbid you first.

Scoring table (tokens won/lost per game):

  Bid Range     | Trumper Wins  | Trumper Loses
  ------------- | ------------- | ------------------------------------------
  150 - 190     | 5 tokens      | Opposing team gets 3 tokens
  200 - 300     | 6 tokens      | Opposing team gets 5 tokens
  304           | 10 tokens     | Opposing team gets 7 tokens

  In a 3-player game, when the trumper loses, EACH of the two
  opposing players receives the listed token amount individually.

Overall match: Players play unlimited games, tracking cumulative
token scores. Players can stop at any time.


2.4 The Trump
-------------

The trump is a suit chosen by the trumper (highest bidder). A card
in the trump suit beats any card in any other suit.

Trump selection process:
1. The trumper selects a trump suit and places one card from that
   suit face-down on the table. This card is called "The Trump Card."
2. The trumper must NOT announce the trump suit to other players.
3. The Trump Card cannot be used during normal play (it is set aside).

3-player card exchange (only in 3-player games):
- After placing The Trump Card, the trumper may optionally exchange
  cards with the center pile: place exactly 2 cards face-down and
  pick up the 2 center cards. This is all-or-nothing (no partial
  exchange).
- The 2 cards placed down by the trumper count toward the opposing
  team's points at the end of the game.

2-player games:
- The trumper places The Trump Card face-down. No card exchange
  occurs. The center pile is used only as a draw pile after tricks.


2.5 Game Play
-------------

The player to the dealer's left leads the first trick.
Exception: If the bid was exactly 304, the trumper leads first.

Play proceeds clockwise. Each subsequent player must follow suit
(play a card of the same suit as the lead card — the "calling suit").
The player with the highest-value card in the calling suit wins the
trick, UNLESS the trick is cut with a trump (see Section 2.5.1).

The trick winner collects the played cards (the "trick") and sets
them aside. Tricks cannot be looked at again, except for the most
recently completed trick.

The trick winner leads the next trick.

Important: The number of tricks won is irrelevant. Only the total
POINTS in the cards within won tricks matter.

2-player draw rule:
- After each trick, both players draw one card from the center pile.
  The trick winner draws first. This continues until the center pile
  is exhausted.


2.5.1 Cutting
-------------

If a player has no cards in the calling suit, they have two options:

Option A — Attempt to cut (play a trump):
  - If the trump suit has NOT yet been revealed:
    * A non-trumper player must ASK the trumper to reveal the trump.
      The trumper then flips The Trump Card face-up for all to see.
    * After seeing the trump suit, the player plays a trump card to
      cut — if they have one. If they don't have any trump cards,
      they play any other card instead.
  - If the trump suit has already been revealed:
    * The player may directly play a trump card to cut.
  - A cut wins the trick unless a subsequent player plays a higher
    trump card.

Option B — Discard (play an off-suit card):
  - The player plays a card from a suit that is neither the calling
    suit nor the trump suit. This card cannot win the trick.
  - Important: If the trump is still hidden and the player
    accidentally plays a card that happens to be in the trump suit
    (without knowing), it does NOT count as a cut. The trick still
    belongs to the highest card in the calling suit.

When the trumper wants to cut:
  - The trumper must reveal the trump suit BEFORE playing a trump
    card. If the trumper plays a trump card without first revealing,
    it is NOT considered a cut.
  - If the trumper chooses not to cut, they may discard a card from
    any non-calling suit.

Trump Card return:
  - Once the trump is revealed, The Trump Card is returned to the
    trumper's hand and can be played normally in future tricks.
  - If the trump is never revealed during the game, the trumper must
    reveal it on the final (last) trick.


2.5.2 Special Rules for Playing Trumps
--------------------------------------

Once the trump suit is revealed and publicly known:
- If a player leads with a trump-suit card, all other players must
  follow suit with trump cards (if they have any).
- The trick is won by the highest-value trump card played.
- Trump cards can still only be played as a cut if the player has no
  cards in the calling suit.

Spoilt Trumps:
- If all 8 cards of the trump suit end up entirely within the
  trumper's team (or in the trumper's hand alone in 2/3-player), the
  game is declared void ("spoilt trump game"). No one wins or loses
  tokens for that game.


3.0 Deciding the Result of a Game
---------------------------------

After all tricks are played, the total points of cards won by the
trumper's team are calculated:
- If the total meets or exceeds the bid amount → trumper's team wins.
- If the total is below the bid amount → opposing team wins.

The margin of victory/defeat is irrelevant. Token awards are based
solely on the scoring table in Section 2.3, determined by the bid
range.

The losing team pays the token amount to the winning team.


4.0 Comprehensive Rules
-----------------------

The following are additional rules and special situations.

4.1 Communication
-----------------

No verbal, signed, or any other form of communication is allowed
between players during a game, other than what is inherent in playing
cards and stating bids. Communication is allowed only between games.


4.2 Rule Violations
-------------------

Violation of any rule results in the opposing team being awarded the
current game PLUS 2 additional bonus tokens. This includes:
- Incorrectly calling a spoilt game.
- Any inadvertent rule-breaking.


4.3 Shuffling Rules
-------------------

Rules governing shuffling:
- The dealer may not look at the face of any card while shuffling or
  dealing.
- The dealer may not arrange cards in a specific order before
  shuffling.
- The dealer may not count or move cards individually during the
  shuffle.
- The deck must remain as one whole unit between shuffles (no
  splitting into separate piles).
- Shuffling and dealing must be clearly visible to all players.

Note: Thorough shuffling is not required. Minimal shuffling is a
legitimate tactic, but can be countered by the cutting player making
a strategic cut. All shuffling rules also apply to cutting.


5.0 System Rules for Online Play
---------------------------------

- Every player gets 30 seconds per turn. If the timer runs out, the
  system automatically plays a random valid card on behalf of the
  player.
